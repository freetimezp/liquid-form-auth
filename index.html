<!DOCTYPE html>
<html lang="uk">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet" />
        <link rel="stylesheet" href="./assets/css/style.css" />
        <title>Project</title>
    </head>
    <body>
        <main class="main">
            <div class="liquid-glass auth-component" id="auth-container">
                <div class="liquid-glass--bend"></div>
                <div class="liquid-glass--face"></div>
                <div class="liquid-glass--edge"></div>
                <div class="glass-drag-handle"></div>

                <div class="liquid-glass__menu">
                    <div class="auth-component">
                        <form class="login-form" id="login-form">
                            <h2>Приєднатись</h2>

                            <!-- перелік магазинів -->
                            <div class="input-group">
                                <select data-magazine>
                                    <option value="">Оберіть магазин</option>
                                    <option value="shop1">Магазин №1</option>
                                    <option value="shop2">Магазин №2</option>
                                    <option value="shop3">Магазин №3</option>
                                </select>
                                <i class="ri-store-2-line"></i>
                            </div>

                            <!-- ІНН користувача -->
                            <div class="input-group">
                                <input type="text" placeholder="Введіть ІНН" data-inn />
                                <i class="ri-user-line"></i>
                            </div>

                            <!-- ім'я користувача -->
                            <p class="hidden" data-username></p>

                            <!-- пароль -->
                            <div class="input-group hidden" data-pass-group>
                                <input type="password" placeholder="Введіть пароль" data-pass autocomplete="off" />
                                <i class="ri-lock-line"></i>
                            </div>

                            <!-- касовий апарат -->
                            <div class="input-group hidden" data-cash-group>
                                <select data-cash></select>
                                <i class="ri-money-dollar-circle-line"></i>
                            </div>

                            <!-- кнопка -->
                            <button type="submit">Відправити</button>

                            <!-- повідомлення -->
                            <p data-error id="error-msg"></p>
                        </form>
                    </div>
                </div>
            </div>

            <div class="app-content hidden" id="app">
                <h1>Ласкаво просимо до системи!</h1>
            </div>
        </main>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/Draggable.min.js"></script>
        <script src="./assets/js/main.js"></script>
        <script src="./assets/js/auth.js"></script>

        <script>
            const dummyUsers = {
                1234567890: {
                    name: "Олена Петренко",
                    password: "pass123",
                    magazines: ["shop1", "shop2"],
                    cashRegisters: ["SR1", "DJ7", "BL4"],
                    workdays: [1, 2, 3, 4, 5],
                },
                9876543210: {
                    name: "Іван Коваль",
                    password: "qwerty",
                    magazines: ["shop3"],
                    cashRegisters: ["SR1"],
                    workdays: [2, 4, 6],
                },
            };

            new AuthForm(".auth-component", {
                users: dummyUsers,
                onSuccess: (user) => {
                    const auth = document.querySelector(".auth-component");
                    const app = document.querySelector("#app");

                    gsap.to(auth, {
                        opacity: 0,
                        duration: 1,
                        onComplete: () => {
                            auth.classList.add("hidden");
                            app.classList.remove("hidden");
                            gsap.fromTo(app, { opacity: 0 }, { opacity: 1, duration: 1 });
                        },
                    });

                    console.log("User logged in:", user);
                },
            });
        </script>
    </body>
</html>
